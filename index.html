<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0,viewport-fit=cover" />
<title>TV + Mobile PDF Viewer ‚Äî Jai321k</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>

<style>
  :root{
    --bg:#060b14;
    --panel:#0f172a;
    --accent:#3b82f6;
    --accent2:#10b981;
    --accent3:#9333ea;
    --text:#f9fafb;
    --muted:#9ca3af;
  }
  html,body{
    height:100%;
    margin:0;
    background:radial-gradient(circle at top, #0a0f20, #06080f 80%);
    color:var(--text);
    font-family:'Poppins', system-ui, sans-serif;
    overflow:hidden;
  }

  .app{height:100vh; display:flex; flex-direction:column; animation:fadeIn 0.7s ease;}
  header{
    display:flex;
    align-items:center;
    justify-content:center;
    padding:14px;
    background:linear-gradient(90deg,var(--accent),var(--accent3),var(--accent2));
    background-size:300% 300%;
    animation:gradientMove 6s ease infinite;
    box-shadow:0 0 12px rgba(0,0,0,0.4);
  }
  h1{font-size:18px; margin:0; letter-spacing:0.4px; text-align:center;}

  main {
    flex:1;
    background: rgba(0,0,0,0.8);
    position:relative;
    overflow:hidden;
    display:flex;
    flex-direction:column;
  }

  #canvasContainer {
    width:100%;
    height:100%;
    overflow:auto;
    display:flex;
    justify-content:center;
    align-items:flex-start;
    padding:20px;
    animation:fadeIn 1.2s ease;
    scroll-behavior:smooth;
    cursor:grab;
    touch-action:pan-y pan-x;
  }
  #canvasContainer:active { cursor:grabbing; }

  canvas {
    max-width:100%;
    height:auto;
    border-radius:10px;
    box-shadow:0 10px 40px rgba(0,0,0,0.7);
    transition:transform 0.35s ease, opacity 0.35s ease;
    opacity:1;
  }

  .bottom{
    display:flex;
    flex-wrap:wrap;
    gap:10px;
    padding:12px;
    align-items:center;
    justify-content:center;
    background:linear-gradient(180deg, rgba(0,0,0,0.5), rgba(0,0,0,0.9));
    box-shadow:0 -2px 12px rgba(0,0,0,0.5);
  }

  .btn-big{
    padding:10px 16px;
    font-size:16px;
    border-radius:12px;
    min-width:80px;
    background:linear-gradient(135deg, var(--accent2), var(--accent3));
    border:none;
    cursor:pointer;
    transition:all 0.25s ease;
    color:#fff;
    font-weight:600;
    letter-spacing:0.5px;
  }
  .btn-big:hover{transform:scale(1.08); box-shadow:0 0 15px var(--accent3);}

  .info{
    position:absolute;
    left:16px;
    bottom:16px;
    color:var(--muted);
    font-size:14px;
    opacity:0.8;
  }
  .credit{
    position:absolute;
    right:16px;
    bottom:16px;
    font-size:14px;
    font-weight:600;
    color:var(--accent);
    text-shadow:0 0 8px var(--accent2), 0 0 15px var(--accent3);
    animation:glow 2s ease-in-out infinite alternate;
  }

  @keyframes fadeIn{from{opacity:0;}to{opacity:1;}}
  @keyframes gradientMove{
    0%{background-position:0% 50%;}
    50%{background-position:100% 50%;}
    100%{background-position:0% 50%;}
  }
  @keyframes glow{
    from{text-shadow:0 0 8px var(--accent2),0 0 15px var(--accent3);}
    to{text-shadow:0 0 15px var(--accent3),0 0 25px var(--accent2);}
  }

  @media (max-width:768px){
    h1{font-size:16px;}
    .btn-big{font-size:14px; min-width:70px; padding:8px 12px;}
    .bottom{gap:8px; padding:10px;}
    #canvasContainer{padding:10px;}
  }
</style>
</head>
<body>
<div class="app">
  <header>
    <h1>üìÑ PDF Viewer ‚Äî by Jai321k</h1>
  </header>

  <main>
    <div id="canvasContainer" tabindex="0">
      <canvas id="pdfCanvas"></canvas>
    </div>
    <div class="info" id="status">Loading PDF...</div>
    <div class="credit">‚ú® Created by <b>jai321k</b></div>
  </main>

  <div class="bottom">
    <button class="btn-big" id="prevBtn">‚óÄ Prev</button>
    <div style="display:flex;flex-direction:column;align-items:center;">
      <div style="font-size:18px;font-weight:600;" id="pageInfo">0 / 0</div>
      <div style="font-size:13px;color:var(--muted)">Use remote or arrows</div>
    </div>
    <button class="btn-big" id="nextBtn">Next ‚ñ∂</button>
    <button class="btn-big" id="zoomOut">‚ûñ</button>
    <button class="btn-big" id="zoomIn">‚ûï</button>
    <button class="btn-big" id="fitBtn">üìè Fit</button>
    <button class="btn-big" id="rotateBtn">‚§æ Rotate</button>
    <button class="btn-big" id="fullscreenBtn">‚§¢ Full</button>
  </div>
</div>

<script>
pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js';

const canvas=document.getElementById('pdfCanvas');
const ctx=canvas.getContext('2d');
const status=document.getElementById('status');
const pageInfo=document.getElementById('pageInfo');
const container=document.getElementById('canvasContainer');

let pdfDoc=null,currentPage=1,scale=1.2,rotation=0;

// üßæ Auto-load PDF from your GitHub link
const PDF_URL = "https://raw.githubusercontent.com/gtasamodstamil-star/Pdf-viewer-on-Android-tv/main/CS3311-Data-Structures-Lab-R2021%201.pdf"; // replace this with your GitHub raw file link
loadPDF(PDF_URL);

async function loadPDF(src){
  try{
    status.textContent='üìÑ Loading PDF...';
    pdfDoc=await pdfjsLib.getDocument({url:src}).promise;
    currentPage=1;scale=1.2;rotation=0;
    renderPage(currentPage);
  }catch(err){console.error(err);status.textContent='‚ùå Error loading PDF.';}
}

async function renderPage(num){
  status.textContent=`Rendering page ${num}...`;
  canvas.style.opacity=0;
  const page=await pdfDoc.getPage(num);
  const viewport=page.getViewport({scale,rotation});
  canvas.height=viewport.height;
  canvas.width=viewport.width;
  await page.render({canvasContext:ctx,viewport}).promise;
  pageInfo.textContent=`${currentPage} / ${pdfDoc.numPages}`;
  status.textContent=`‚úÖ Page ${currentPage} of ${pdfDoc.numPages}`;
  setTimeout(()=>canvas.style.opacity=1,100);
}

document.getElementById('prevBtn').onclick=()=>{if(pdfDoc&&currentPage>1){currentPage--;renderPage(currentPage);}};
document.getElementById('nextBtn').onclick=()=>{if(pdfDoc&&currentPage<pdfDoc.numPages){currentPage++;renderPage(currentPage);}};
document.getElementById('zoomIn').onclick=()=>{if(pdfDoc){scale+=0.2;renderPage(currentPage);}};
document.getElementById('zoomOut').onclick=()=>{if(pdfDoc){scale=Math.max(0.4,scale-0.2);renderPage(currentPage);}};
document.getElementById('fitBtn').onclick=()=>{
  if(!pdfDoc)return;
  const w=container.clientWidth-20;
  pdfDoc.getPage(currentPage).then(p=>{
    const vp=p.getViewport({scale:1});
    scale=Math.max(0.5,(w/vp.width));
    renderPage(currentPage);
  });
};
document.getElementById('rotateBtn').onclick=()=>{if(pdfDoc){rotation=(rotation+90)%360;renderPage(currentPage);}};

document.getElementById('fullscreenBtn').onclick=()=>{
  const el=document.documentElement;
  if(!document.fullscreenElement){el.requestFullscreen?.();}else{document.exitFullscreen?.();}
};
</script>
</body>
</html>
